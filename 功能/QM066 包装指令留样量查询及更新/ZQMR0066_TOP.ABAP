*&---------------------------------------------------------------------*
*& 包含               ZQMR0066_TOP
*&---------------------------------------------------------------------*

TABLES: AUFK,QALS,ZQMT0066A,ZQMT0066_LOG,MKPF,MSEG,ZQMS0066.

TYPE-POOLS: SLIS,ICON.

DATA: I_FIELDCAT TYPE SLIS_T_FIELDCAT_ALV WITH HEADER LINE,
      WA_LAYOUT  TYPE SLIS_LAYOUT_ALV,
      IS_SETTING TYPE LVC_S_GLAY.
DATA: TD_LIST     TYPE LVC_T_DROP,
      TS_LIST     TYPE LVC_S_DROP,
      TD_FIELDCAT TYPE TABLE OF LVC_S_FCAT.
DATA: TH_LAYOUT TYPE LVC_S_LAYO.
DATA: LS_EDIT TYPE LVC_S_STYL,
      LT_EDIT TYPE LVC_T_STYL.
DATA: WA_SORT_LVC TYPE LVC_S_SORT,
      IT_SORT_LVC TYPE LVC_T_SORT.
DATA: WA_FILTER TYPE LVC_S_FILT,
      IT_FILTER TYPE LVC_T_FILT.

DATA: LV_ANSWER(1)  TYPE C,
      LV_ANSWER1(1) TYPE C,
      LV_ERR(1)     TYPE C,
      LV_CHECK(1)   TYPE C,
      LV_INFO       TYPE STRING.
DATA: LV_MARK(1) TYPE C.

*************************************************************************

DATA: LS_LOG TYPE ZQMT0066_LOG,
      LT_LOG TYPE STANDARD TABLE OF ZQMT0066_LOG.

TYPES: BEGIN OF TY_LOGSHOW.
         INCLUDE STRUCTURE LS_LOG.
         TYPES: ZSIGNTXT(20) TYPE C,
         ZAUFNR       TYPE AUFNR,
       END OF TY_LOGSHOW.

DATA: LS_LOGSHOW TYPE TY_LOGSHOW,
      LT_LOGSHOW TYPE STANDARD TABLE OF TY_LOGSHOW.

DATA: LV_COUNT TYPE I.

DATA: LS_LIST TYPE ZQMT0066A,
      LT_LIST TYPE STANDARD TABLE OF ZQMT0066A.

TYPES: BEGIN OF TY_ALVR.
         INCLUDE STRUCTURE ZQMT0066A.
         TYPES: SEL          TYPE CHAR1,
         ICON(4)      TYPE C,
         STATUS(1)    TYPE C,
         MESSAGE(255) TYPE C,
         ZMARK(1)     TYPE C,
         ZINDEX       TYPE I,
         ZSIGNTXT(20) TYPE C,
         ZAUFNR       TYPE AUFNR,
       END OF TY_ALVR.

DATA: LS_ALVR TYPE TY_ALVR,
      LT_ALVR TYPE STANDARD TABLE OF TY_ALVR.
DATA: LS_ALVRTMP TYPE TY_ALVR,
      LT_ALVRTMP TYPE STANDARD TABLE OF TY_ALVR.

DATA: LS_ZQMT0066A TYPE ZQMT0066A,
      LT_ZQMT0066A TYPE STANDARD TABLE OF ZQMT0066A.
DATA: GS_ZQMT0066A TYPE ZQMT0066A,
      GT_ZQMT0066A TYPE STANDARD TABLE OF ZQMT0066A.

DATA: SAVE_OK TYPE SY-UCOMM.
DATA: OK_CODE_9001 LIKE SY-UCOMM.

DATA: LV_GUID TYPE SYSUUID_C32.

DATA: LS_LISTIN  TYPE ZQMS0066,
      LS_LISTOUT TYPE ZQMS0066.
DATA: LV_TYPE TYPE BAPI_MTYPE,
      LV_MEG  TYPE BAPI_MSG.

RANGES: R_ZAUFNR FOR AUFK-AUFNR.

DATA: LS_QALS TYPE QALS,
      LT_QALS TYPE STANDARD TABLE OF QALS.

TYPES: BEGIN OF TY_ITAB,
         WERKS TYPE AUFK-WERKS,
       END OF TY_ITAB.

DATA: LS_ITAB TYPE TY_ITAB,
      LT_ITAB TYPE STANDARD TABLE OF TY_ITAB.

DATA: GT_CODE TYPE TABLE OF SY-UCOMM.

*----------------------------------------------------------------------*
*        SELECTION SCREEN                                              *
*----------------------------------------------------------------------*

SELECTION-SCREEN BEGIN OF BLOCK GB01 WITH FRAME TITLE TEXT-G01.

SELECTION-SCREEN BEGIN OF BLOCK X1 WITH FRAME TITLE TEXT-001.

SELECT-OPTIONS: S_AUFNR FOR AUFK-AUFNR NO INTERVALS MODIF ID X1.

SELECTION-SCREEN END OF BLOCK X1.

SELECTION-SCREEN BEGIN OF BLOCK X2 WITH FRAME TITLE TEXT-002.

SELECT-OPTIONS: S_ZAUFNR FOR AUFK-AUFNR MODIF ID X2.
SELECT-OPTIONS: S_CREDAT FOR MKPF-BLDAT MODIF ID X2.

SELECTION-SCREEN END OF BLOCK X2.

SELECTION-SCREEN END OF BLOCK GB01.

SELECTION-SCREEN BEGIN OF BLOCK GB02 WITH FRAME TITLE TEXT-G02.

PARAMETERS: R1 RADIOBUTTON GROUP RD DEFAULT 'X' USER-COMMAND SINGLECLICK,
            R2 RADIOBUTTON GROUP RD.

SELECTION-SCREEN END OF BLOCK GB02.